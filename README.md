# Football Manager 選手評価ツール

## はじめに
Football Managerのゲーム内データを利用して、選手のパフォーマンス（評価点）を予測し、移籍市場での意思決定をサポートするデスクトップアプリケーションです。人力では調査不可能な膨大な選手リストの中から、予算・能力・ポジション・年齢の面であなたの要求を満たす選手を効率的に見つけ出すことができます。

## 概要
このアプリケーションは、以下の機能を備えています。


* **データ処理** : Football Manager 内から誰でも取得可能なHTML形式の選手データを読み込み、選手の能力値・年齢・市場価値・ポジション等の情報を自動で抽出・整理します。
* **機械学習モデル**: ポジションごとに学習データを分けたうえで線形回帰モデルを学習し、モデルを用いて選手の能力値からパフォーマンスを予測します。
* **選手評価機能**: 予算上限、年齢、ポジション適性といった条件で選手をフィルタリングし、条件を満たす選手を、モデルの予測パフォーマンスが高い順にランキング形式で表示します。
* **GUI**: プログラミングの知識がない方でも簡単に操作できるよう、シンプルなグラフィカルユーザーインターフェースを実装しています。

## デモ動画
https://youtu.be/Jpr47hdE8Yc

## 環境
* **開発言語**: Python 3.12.10
* **アプリケーション**: Football Manager 2024
* **OS**: Windows 10 (バージョン 22H2)

## 利用方法
### 1.モデルの学習
1. Football Managerのゲーム内で、モデルの学習に使用したい選手のリストをHTML形式でエクスポートします。（データに含まれているべき項目は後述）なお、ご自身でデータを用意せずとも、デフォルトで"training_data"に含まれているデータだけを使って構いません。（そのため、個人的によりデータを増やしてモデル構築したいという方でない限りは、ステップ1とステップ2は飛ばして問題ありません）
2. エクスポートしたHTMLファイルをtraining_dataディレクトリに配置します。
3. コマンドプロンプトを開き、"main_app.py"、"model_handler.py"などが置かれているディレクトリに移動します。
4. "python main_app.py"を実行し、アプリケーションを起動します。
5. GUIの「モデルを学習・保存」ボタンをクリックして、モデルを学習させます。デフォルトでは6分程度要します。

### 2.選手の評価
1. "python main_app.py"を実行し、アプリケーションを起動します。
2. 「評価対象HTMLファイルを選択」ボタンをクリックし、評価したい選手データのHTMLファイルを選択します（データに含まれているべき項目は後述)。
3. どのポジションで選手を評価するか、予算の上限、年齢の範囲、ポジション適性（後述）、表示する人数などの条件を設定します。
4. 「評価実行」ボタンをクリックすると、予測評価に基づいた選手リストが表示されます。30000人程度のデータに対して、リストアップに30秒程度要します。

### 3.データに含まれているべき項目
学習データおよび評価対象のデータ（HTMLファイル）をゲームから取得するにあたって、以下の項目が含まれている必要があります。シリーズや環境によって能力の呼称が微妙に異なる場合は括弧内を含めて二通りの呼び方を示しています。
* 名前
* 年齢
* ポジション
* 第2ポジション（サブポジション）
* 賃金
* 移籍評価額
* 国籍
* ディビジョン
* クラブ
* 冷静さ
* 予測力
* 勇敢さ（度胸）
* 敏捷性（俊敏性）
* 飛び出し
* 反応（反射神経）
* 判断力
* 積極性
* 勝利意欲（意志の強さ）
* 集中力
* 視野
* 支配力
* 健康さ（基礎体力）
* 決定力
* 空中リーチ（空中戦での高さ）
* 強靭さ
* 奇抜さ
* 加速力
* 運動量
* ロングスロー
* ロングシュート
* リーダーシップ
* マーキング
* ポジショニング
* ペナルティキック
* ヘディング
* フリーキック
* ファーストタッチ
* ひらめき（直観力）
* ハンドリング
* パンチング
* バランス
* パス
* ドリブル
* テクニック
* チームワーク
* タックル
* スローイング
* スピード
* スタミナ
* ジャンプ力
* コーナーキック
* コーチング（コミュニケーション能力）
* クロス
* キック
* オフザボール
* 1対1
* 出場時間
* 勝利
* 引き分け
* 敗戦
* 平均評価
* 情報
* 推薦

### 4.ポジション適性について
本アプリケーションは、ポジション別に選手を評価・リストアップしますが、その際に、「選手にどの程度そのポジションでの適性を求めるのか」を三段階で設定できます。<br>
* Natural: そのポジションについて、適性が、「天性（達者）」である選手だけを対象にする。
* Accomplished: そのポジションについて、適性が、「天性（達者）もしくは熟達」である選手だけを対象にする。
* Others: 適正に関係なくすべての選手を対象に評価する。
といった基準です。<br>

NaturalやAccomplishedを指定すると、そのポジションの即戦力として即時起用できるような選手を候補としてリストアップできます。一方、Othersを指定すると、そのポジションの適正はないものの、起用し続けて適性を付ければ、NaturalやAccomplishedでリストアップした本職の選手より高いパフォーマンスを期待できるような将来性を持つ選手をリストアップできます。

## 今後の方針
* **モデルの改善**: 現在の単純な線形回帰モデルに加え、ニューラルネットワークなどを利用したより複雑なモデルを試行します。また、勝利数や敗戦といった「結果のバイアス」をできるだけ取り除く方法を検討することで学習データの質の向上を狙います。これらの方法で、より予測精度の高いモデルの構築を狙います。
* **予測理由の可視化**: なぜ特定の選手が高い評価を得たのか、その要因を可視化する機能を追加することを目指します。
* **パフォーマンスの向上**:  データ量が大きい場合の処理速度を改善するため、より効率的なデータハンドリング手法を検討します。
* **UIの改善**: 少し情報が多く、説明・デモ動画抜きでは直観的に扱えないインタフェースを分かりやすく改善していきたいと考えております。
